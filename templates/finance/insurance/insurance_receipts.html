{% extends "base.html" %}
{% block content %}

<div class="max-w-8xl mx-auto mt-10 bg-white shadow rounded p-6">
  <h2 class="text-2xl font-bold mb-4">Insurance Payment Receipts</h2>

  {% if insurance_receipts %}
    <table class="w-full border text-sm mb-6">
      <thead class="bg-blue-600 text-white">
        <tr>
          <th class="border px-3 py-2 text-left">Receipt ID</th>
          <th class="border px-3 py-2 text-left">Patient</th>
          <th class="border px-3 py-2 text-left">Visit Code</th>
          <th class="border px-3 py-2 text-left">Status</th>
          <th class="border px-3 py-2 text-left">Date</th>
          <th class="border px-3 py-2 text-center">Action</th>
        </tr>
      </thead>
      <tbody>
        {% for receipt in insurance_receipts %}
        <tr class="border-t hover:bg-gray-50">
          <td class="px-3 py-2">{{ receipt.receipt_id }}</td>
          <td class="px-3 py-2">{{ receipt.patient.get_full_name|default:receipt.patient.username }}</td>
          <td class="px-3 py-2">{{ receipt.visit.tracking_code }}</td>
          <td class="px-3 py-2">{{ receipt.status|capfirst }}</td>
          <td class="px-3 py-2">{{ receipt.date_created|date:"d M Y, H:i" }}</td>
          <td class="px-3 py-2 text-center">
            <a href="{% url 'view_payment_receipt' receipt.receipt_id %}" class="text-blue-600 hover:underline">View</a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <div class="text-right text-sm text-gray-700 mt-4">
      <strong>Total Insurance Receipts:</strong> {{ total_insurance_amount }}
    </div>
  {% else %}
    <p class="text-center text-gray-600">No insurance receipts found.</p>
  {% endif %}
</div>

{% endblock %}
