{% extends "base.html" %}
{% block content %}

<!-- Alpine.js for modal toggle -->
<script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

<!-- Flash Messages -->
{% if messages %}
  <div class="my-4">
    {% for message in messages %}
      <div class="text-sm p-2 mb-2 rounded 
                  {% if message.tags == 'error' %}bg-red-100 text-red-700
                  {% elif message.tags == 'success' %}bg-green-100 text-green-700
                  {% elif message.tags == 'warning' %}bg-yellow-100 text-yellow-700
                  {% else %}bg-blue-100 text-blue-700{% endif %}">
        {{ message }}
      </div>
    {% endfor %}
  </div>
{% endif %}

<section class="bg-gray-100 py-10" x-data="{ open: false }">
  <div class="max-w-8xl mx-auto bg-white p-6 shadow rounded-lg overflow-x-auto">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-2xl font-bold text-blue-600">Fixed Asset Register</h2>
      <button @click="open = true"
              class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded">
        + Add Asset
      </button>
    </div>

    <!-- Table -->
    <table class="min-w-full border border-gray-300 text-sm">
      <thead class="bg-gray-100 text-blue-600">
        <tr>
          <th class="px-4 py-2 border">Asset</th>
          <th class="px-4 py-2 border">Asset Class</th>
          <th class="px-4 py-2 border">Purchase Date</th>
          <th class="px-4 py-2 border">Disposal/Deletion Date</th>
          <th class="px-4 py-2 border">Asset Description</th>
          <th class="px-4 py-2 border">Cost of Assets</th>
          <th class="px-4 py-2 border">Additions</th>
          <th class="px-4 py-2 border">Disposal/Deletion</th>
          <th class="px-4 py-2 border">Total Asset</th>
          <th class="px-4 py-2 border">Opening Cumulative Depreciation</th>
          <th class="px-4 py-2 border">Depreciation for Year</th>
          <th class="px-4 py-2 border">Depreciation on Deletion</th>
          <th class="px-4 py-2 border">Total Accumulated Depreciation</th>
          <th class="px-4 py-2 border">Net Book Value</th>
          <th class="px-4 py-2 border">Currency</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-100 text-gray-700">
        <!-- Sample Row -->
        <tr>
          <td class="px-4 py-2 border">50000879</td>
          <td class="px-4 py-2 border">Tools</td>
          <td class="px-4 py-2 border">13/09/2013</td>
          <td class="px-4 py-2 border">â€”</td>
          <td class="px-4 py-2 border">D Shackles 16 mm pin dia 2 Ton</td>
          <td class="px-4 py-2 border">16,975.35</td>
          <td class="px-4 py-2 border">0</td>
          <td class="px-4 py-2 border">0</td>
          <td class="px-4 py-2 border">16,975.35</td>
          <td class="px-4 py-2 border">-16,975.35</td>
          <td class="px-4 py-2 border">0</td>
          <td class="px-4 py-2 border">0</td>
          <td class="px-4 py-2 border">-16,975.35</td>
          <td class="px-4 py-2 border">0.00</td>
          <td class="px-4 py-2 border">KES</td>
        </tr>
        <!-- More rows dynamically -->
      </tbody>
    </table>
  </div>

  <!-- Modal -->
  <div class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50" x-show="open">
    <div class="bg-white p-6 rounded-lg w-full max-w-2xl shadow-xl">
      <div class="flex justify-between mb-4">
        <h3 class="text-xl font-semibold text-gray-800">Add New Asset</h3>
        <button @click="open = false" class="text-gray-500 hover:text-red-600 text-2xl leading-none">&times;</button>
      </div>

      <form action="" method="POST" class="grid grid-cols-1 md:grid-cols-2 gap-4">
        {% csrf_token %}
        <input type="text" name="asset" placeholder="Asset ID" required class="border p-2 rounded">
        <input type="text" name="asset_class" placeholder="Asset Class" required class="border p-2 rounded">
        <input type="date" name="purchase_date" required class="border p-2 rounded">
        <input type="date" name="disposal_date" class="border p-2 rounded">
        <input type="text" name="description" placeholder="Description" class="border p-2 rounded">
        <input type="number" name="cost" placeholder="Cost of Assets" required class="border p-2 rounded">
        <input type="number" name="additions" placeholder="Additions" class="border p-2 rounded">
        <input type="number" name="disposal" placeholder="Disposal/Deletion" class="border p-2 rounded">
        <input type="number" name="total_asset" placeholder="Total Asset" class="border p-2 rounded">
        <input type="number" name="opening_depreciation" placeholder="Opening Cumulative Depreciation" class="border p-2 rounded">
        <input type="number" name="depreciation_year" placeholder="Depreciation for Year" class="border p-2 rounded">
        <input type="number" name="depreciation_deletion" placeholder="Depreciation on Deletion" class="border p-2 rounded">
        <input type="number" name="total_depreciation" placeholder="Total Accumulated Depreciation" class="border p-2 rounded">
        <input type="number" name="net_book_value" placeholder="Net Book Value" class="border p-2 rounded">
        <input type="text" name="currency" placeholder="Currency (e.g. KES)" required class="border p-2 rounded">

        <div class="col-span-1 md:col-span-2 mt-4">
          <button type="submit" class="w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700">
            Submit Asset
          </button>
        </div>
      </form>
    </div>
  </div>
</section>

{% endblock %}
