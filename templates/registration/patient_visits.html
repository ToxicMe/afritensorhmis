{% extends "base.html" %}

{% block content %}



{% if messages %}
  <div class="my-4">
    {% for message in messages %}
      <div class="text-sm p-2 mb-2 rounded 
                  {% if message.tags == 'error' %}bg-red-100 text-red-700
                  {% elif message.tags == 'success' %}bg-green-100 text-green-700
                  {% elif message.tags == 'warning' %}bg-yellow-100 text-yellow-700
                  {% else %}bg-blue-100 text-blue-700{% endif %}">
        {{ message }}
      </div>
    {% endfor %}
  </div>
{% endif %}


<div class="overflow-x-auto">
    <table class="min-w-full bg-white">
      <thead class="bg-gray-100 whitespace-nowrap">
        <tr>
          <th class="p-4 text-left text-[13px] font-semibold text-slate-900">
            Visit ID
          </th>
          <th class="p-4 text-left text-[13px] font-semibold text-slate-900">
            Date
          </th>
         
          <th class="p-4 text-left text-[13px] font-semibold text-slate-900">
            Stage
          </th>
          <th class="p-4 text-left text-[13px] font-semibold text-slate-900">
            Actions
          </th>
        </tr>
      </thead>

      <tbody class="whitespace-nowrap">
        {% for visit in visits %}
        <tr class="hover:bg-gray-50">
          <td class="p-4 text-[15px] text-slate-900 font-medium">
            {{ visit.tracking_code }}
          </td>
          <td class="p-4 text-[15px] text-slate-600 font-medium">
            {{ visit.date_time }}
          </td>
         
          <td class="p-4 text-[15px] text-slate-600 font-medium">
            {{ visit.get_stage_display }}
          </td>
          <td class="p-4">
            <div class=" space-x-4 space-y-4 text-center">

                <form action="#" method="POST">
                    {% csrf_token %}
                <input type="hidden" name="patient_id" value="{{ patient.id }}">
                <button type="submit"
                class="px-5 py-2.5 rounded-lg text-sm tracking-wider font-semibold cursor-pointer border-2 border-blue-700 outline-none bg-transparent hover:bg-blue-700 text-blue-700 hover:text-white transition-all duration-300">
                View Details
                </button>
                </form>
                </a>
            </div>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="3" class="text-center py-4 text-gray-500">No patients found.</td>
        </tr>
        {% endfor %}

     

    

       
      </tbody>
    </table>
  </div>


{% endblock %}
